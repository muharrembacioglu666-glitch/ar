<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Portföy & Arcade | v1.7.0</title>
    <!-- İkonlar -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* --- TEMEL AYARLAR --- */
        :root {
            --bg-color: #121212;
            --panel-bg: #1e1e1e;
            --text-color: #eee;
            --accent-color: #ffcc00; /* Arcade Sarısı */
        }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background-color: var(--bg-color); color: var(--text-color); overflow-x: hidden; }

        /* --- ÜST MENÜ --- */
        header {
            background-color: var(--panel-bg); padding: 15px 30px; display: flex; align-items: center; justify-content: space-between; border-bottom: 2px solid #333;
        }
        nav ul { list-style: none; display: flex; gap: 20px; padding: 0; margin: 0; }
        nav a { text-decoration: none; color: #aaa; font-weight: bold; cursor: pointer; transition: 0.3s; }
        nav a:hover, nav a.active { color: var(--accent-color); }

        /* --- SÜRÜM KUTUSU (DÖNEN RENKLİ ÇERÇEVE) v1.7.0 --- */
        #version-wrapper {
            position: relative;
            padding: 3px; /* Çerçeve kalınlığı */
            border-radius: 20px;
            overflow: hidden;
            display: flex; justify-content: center; align-items: center;
        }
        /* Dönen Renkli Arkaplan */
        #version-wrapper::before {
            content: ''; position: absolute; width: 200%; height: 200%;
            background: conic-gradient(red, yellow, lime, cyan, blue, magenta, red);
            animation: spin 3s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        /* İçerik (Siyah Kutu) */
        #version-content {
            position: relative; background-color: #000; color: white;
            padding: 5px 12px; border-radius: 18px; z-index: 2;
            display: flex; gap: 8px; align-items: center; font-weight: bold; font-size: 0.9rem;
        }
        .info-btn { background: #fff; color: #000; border: none; border-radius: 50%; width: 20px; height: 20px; cursor: pointer; font-weight: bold; }

        /* --- İÇERİK BÖLÜMLERİ --- */
        .container { max-width: 1000px; margin: 40px auto; padding: 20px; display: none; text-align: center; }
        .section.active { display: block; animation: fadeEffect 0.5s; }
        @keyframes fadeEffect { from {opacity: 0;} to {opacity: 1;} }

        /* --- OYUN MENÜSÜ --- */
        .games-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; }
        .game-card { background: var(--panel-bg); padding: 20px; border-radius: 10px; cursor: pointer; transition: 0.3s; border: 2px solid #333; }
        .game-card:hover { border-color: var(--accent-color); transform: translateY(-5px); }
        .game-card i { font-size: 3rem; margin-bottom: 10px; color: var(--accent-color); }

        /* --- OYUN ALANI --- */
        #game-area { display: none; margin-top: 20px; }
        #game-canvas-container { position: relative; display: inline-block; border: 4px solid #444; box-shadow: 0 0 20px #000; }
        canvas { background: #000; display: block; }
        
        /* Skor ve Can Bilgisi */
        .game-hud { display: flex; justify-content: space-between; width: 400px; margin: 0 auto 10px auto; font-size: 1.2rem; font-weight: bold; color: var(--accent-color); }
        
        /* Butonlar */
        .control-btn { margin-top: 15px; padding: 10px 20px; background: #e74c3c; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 1rem; }
        .back-btn { background: #3498db; margin-right: 10px; }

        /* --- MODAL (GÜNLÜK) --- */
        #logModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 1000; justify-content: center; align-items: center; }
        .modal-content { background: #222; padding: 25px; border-radius: 10px; width: 80%; max-width: 500px; text-align: left; position: relative; }
        .close-modal { position: absolute; top: 10px; right: 15px; font-size: 1.5rem; cursor: pointer; color: #aaa; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; color: #ccc; }
        th, td { border: 1px solid #444; padding: 8px; }
        th { background: #111; }
    </style>
</head>
<body>

    <header>
        <div style="font-size:1.5rem; font-weight:bold; color:var(--accent-color);">
            <i class="fas fa-gamepad"></i> OYUN PORTALI
        </div>
        <nav>
            <a onclick="showSection('home')" class="active" id="nav-home">Anasayfa</a>
            <a onclick="showSection('games')" id="nav-games">Oyunlar</a>
            <a onclick="showSection('notes')" id="nav-notes">Ders Notları</a>
            <a onclick="showSection('movies')" id="nav-movies">Filmler</a>
        </nav>
        
        <!-- v1.7.0 Dönen Çerçeve -->
        <div id="version-wrapper">
            <div id="version-content">
                <span>v1.7.0</span>
                <button class="info-btn" onclick="document.getElementById('logModal').style.display='flex'">i</button>
            </div>
        </div>
    </header>

    <!-- BÖLÜMLER -->
    <div id="home" class="container section active">
        <h1>Hoşgeldiniz</h1>
        <p>Kişisel web siteme hoşgeldiniz. Oyunlar menüsünden Yılan, Tetris ve Pac-Man oynayabilirsiniz.</p>
    </div>

    <div id="games" class="container section">
        <h2>Oyun Kütüphanesi</h2>
        <div class="games-grid" id="game-selection">
            <div class="game-card" onclick="startGame('snake')">
                <i class="fas fa-worm"></i>
                <h3>Yılan Oyunu</h3>
                <p>Duvarlara çarpma, elmaları topla!</p>
            </div>
            <div class="game-card" onclick="startGame('tetris')">
                <i class="fas fa-th-large"></i>
                <h3>Tetris</h3>
                <p>Tam fonksiyonlu: Çevir, Kaydır, Patlat.</p>
            </div>
            <div class="game-card" onclick="startGame('pacman')">
                <i class="fas fa-ghost"></i>
                <h3>Pac-Man</h3>
                <p>3 Can Hakkı, Arcade Labirent.</p>
            </div>
        </div>

        <!-- OYUN SAHNESİ -->
        <div id="game-area">
            <div class="game-hud">
                <span id="score-display">Skor: 0</span>
                <span id="lives-display" style="display:none;">Can: 3</span>
            </div>
            <div id="game-canvas-container">
                <canvas id="gameCanvas" width="400" height="400"></canvas>
            </div>
            <br>
            <button class="control-btn back-btn" onclick="returnToGameMenu()"><i class="fas fa-arrow-left"></i> Oyun Seçimine Dön</button>
            <button class="control-btn" onclick="resetGame()"><i class="fas fa-redo"></i> Yeniden Başlat</button>
            <p style="color:#777; font-size:0.9rem; margin-top:10px;">Kontroller: Yön Tuşları (Tetris'te YUKARI tuşu döndürür)</p>
        </div>
    </div>

    <div id="notes" class="container section">
        <h2>Ders Notları</h2>
        <p>Notion entegrasyonu buraya gelecek.</p>
    </div>
    <div id="movies" class="container section">
        <h2>Filmler</h2>
        <p>Film listesi buraya gelecek.</p>
    </div>

    <!-- GÜNLÜK MODAL -->
    <div id="logModal">
        <div class="modal-content">
            <span class="close-modal" onclick="document.getElementById('logModal').style.display='none'">&times;</span>
            <h3>Sürüm Günlüğü</h3>
            <table>
                <tr><th>Sürüm</th><th>Değişiklikler</th></tr>
                <tr><td>v1.7.0</td><td>Dönen ışıklı çerçeve, Gelişmiş Tetris, 3 Canlı Pacman.</td></tr>
                <tr><td>v1.6.0</td><td>Renk paleti güncellemeleri.</td></tr>
            </table>
        </div>
    </div>

    <!-- OYUN MOTORU JS -->
    <script>
        // --- DEĞİŞKENLER ---
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let gameInterval;
        let activeGame = null;
        let score = 0;
        let lives = 3;

        // Navigasyon
        function showSection(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.getElementById('nav-'+id).classList.add('active');
            if(id !== 'games') stopGameLoop();
        }

        function returnToGameMenu() {
            stopGameLoop();
            document.getElementById('game-area').style.display = 'none';
            document.getElementById('game-selection').style.display = 'grid';
            document.getElementById('current-game-title')?.remove();
        }

        function stopGameLoop() {
            clearInterval(gameInterval);
            activeGame = null;
        }

        function resetGame() {
            if(activeGame) startGame(activeGame);
        }

        function startGame(gameName) {
            stopGameLoop();
            document.getElementById('game-selection').style.display = 'none';
            document.getElementById('game-area').style.display = 'block';
            activeGame = gameName;
            score = 0;
            lives = 3;
            updateHUD();

            if (gameName === 'snake') initSnake();
            if (gameName === 'tetris') initTetris();
            if (gameName === 'pacman') initPacman();
        }

        function updateHUD() {
            document.getElementById('score-display').innerText = "Skor: " + score;
            const livesDiv = document.getElementById('lives-display');
            if(activeGame === 'pacman') {
                livesDiv.style.display = 'block';
                livesDiv.innerText = "Can: " + "❤️".repeat(lives);
            } else {
                livesDiv.style.display = 'none';
            }
        }

        // ==========================================
        // 1. OYUN: YILAN (Gelişmiş)
        // ==========================================
        let snake = [], apple = {}, vel = {};
        const gridSize = 20; const tileCount = 20;

        function initSnake() {
            snake = [{x:10, y:10}];
            apple = {x:15, y:15};
            vel = {x:0, y:0};
            gameInterval = setInterval(snakeLoop, 100);
            
            // Yılan için özel tuş dinleyici
            document.onkeydown = function(e) {
                if(activeGame !== 'snake') return;
                switch(e.keyCode) {
                    case 37: if(vel.x!==1) {vel.x=-1; vel.y=0;} break; // Sol
                    case 38: if(vel.y!==1) {vel.x=0; vel.y=-1;} break; // Yukarı
                    case 39: if(vel.x!==-1) {vel.x=1; vel.y=0;} break; // Sağ
                    case 40: if(vel.y!==-1) {vel.x=0; vel.y=1;} break; // Aşağı
                }
            };
        }

        function snakeLoop() {
            let head = {x: snake[0].x + vel.x, y: snake[0].y + vel.y};

            // DUVARA ÇARPMA KONTROLÜ (ÖLÜM)
            if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) {
                alert("Oyun Bitti! Duvara çarptın. Skorun: " + score);
                resetGame();
                return;
            }

            // KENDİNE ÇARPMA KONTROLÜ
            for(let i=0; i<snake.length; i++) {
                if(head.x === snake[i].x && head.y === snake[i].y) {
                    alert("Oyun Bitti! Kendini ısırdın. Skorun: " + score);
                    resetGame();
                    return;
                }
            }

            snake.unshift(head);

            // Elma Yeme
            if (head.x === apple.x && head.y === apple.y) {
                score += 10;
                updateHUD();
                apple = {x: Math.floor(Math.random()*tileCount), y: Math.floor(Math.random()*tileCount)};
            } else {
                snake.pop(); // Kuyruğu sil
            }

            // Çizim
            ctx.fillStyle = "black";
            ctx.fillRect(0,0,canvas.width, canvas.height);
            
            ctx.fillStyle = "lime";
            for(let t of snake) ctx.fillRect(t.x*gridSize, t.y*gridSize, gridSize-2, gridSize-2);
            
            ctx.fillStyle = "red";
            ctx.fillRect(apple.x*gridSize, apple.y*gridSize, gridSize-2, gridSize-2);
        }

        // ==========================================
        // 2. OYUN: TETRIS (Tam Fonksiyonlu)
        // ==========================================
        const ROW = 20; const COL = 10; const SQ = 20;
        let board = [];
        let p; // Parça

        // Tetromino Şekilleri (I, J, L, O, S, T, Z)
        const PIECES = [
            [Z,"red"], [S,"green"], [T,"purple"], [O,"yellow"], [L,"orange"], [I,"cyan"], [J,"blue"]
        ];
        function Z(){return [[1,1,0],[0,1,1],[0,0,0]];} function S(){return [[0,1,1],[1,1,0],[0,0,0]];} function T(){return [[0,1,0],[1,1,1],[0,0,0]];} function O(){return [[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]];} function L(){return [[0,0,1],[1,1,1],[0,0,0]];} function I(){return [[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]];} function J(){return [[1,0,0],[1,1,1],[0,0,0]];}

        function initTetris() {
            // Tahtayı oluştur
            for(let r=0; r<ROW; r++){
                board[r] = [];
                for(let c=0; c<COL; c++) board[r][c] = "black";
            }
            p = randomPiece();
            gameInterval = setInterval(drop, 500); // Düşme hızı
            drawBoard();

            document.onkeydown = function(e){
                if(activeGame !== 'tetris') return;
                if(e.keyCode == 37) { p.moveLeft(); dropStart = Date.now(); }
                else if(e.keyCode == 38) { p.rotate(); dropStart = Date.now(); }
                else if(e.keyCode == 39) { p.moveRight(); dropStart = Date.now(); }
                else if(e.keyCode == 40) { p.moveDown(); }
            }
        }

        function randomPiece(){
            let r = Math.floor(Math.random() * PIECES.length);
            return new Piece(PIECES[r][0](), PIECES[r][1]); // Fonksiyonu çalıştırıp diziyi alıyoruz
        }

        function Piece(tetromino, color){
            this.tetromino = tetromino;
            this.color = color;
            this.tetrominoN = 0; // Rotasyon açısı
            this.activeTetromino = this.tetromino;
            this.x = 3; this.y = -2;
        }

        Piece.prototype.fill = function(color){
            for(let r=0; r<this.activeTetromino.length; r++){
                for(let c=0; c<this.activeTetromino.length; c++){
                    if(this.activeTetromino[r][c]){
                        drawSquare(this.x + c, this.y + r, color);
                    }
                }
            }
        }

        Piece.prototype.draw = function(){ this.fill(this.color); }
        Piece.prototype.unDraw = function(){ this.fill("black"); }

        Piece.prototype.moveDown = function(){
            if(!this.collision(0,1,this.activeTetromino)){
                this.unDraw(); this.y++; this.draw();
            } else {
                this.lock();
                p = randomPiece();
            }
        }
        Piece.prototype.moveRight = function(){
            if(!this.collision(1,0,this.activeTetromino)){
                this.unDraw(); this.x++; this.draw();
            }
        }
        Piece.prototype.moveLeft = function(){
            if(!this.collision(-1,0,this.activeTetromino)){
                this.unDraw(); this.x--; this.draw();
            }
        }
        Piece.prototype.rotate = function(){
            let nextPattern = this.activeTetromino[0].map((val, index) => this.activeTetromino.map(row => row[index]).reverse());
            if(!this.collision(0,0,nextPattern)){
                this.unDraw();
                this.activeTetromino = nextPattern;
                this.draw();
            }
        }
        Piece.prototype.lock = function(){
            for(let r=0; r<this.activeTetromino.length; r++){
                for(let c=0; c<this.activeTetromino.length; c++){
                    if(!this.activeTetromino[r][c]) continue;
                    if(this.y + r < 0){
                        alert("Oyun Bitti! Skor: " + score);
                        resetGame();
                        return;
                    }
                    board[this.y+r][this.x+c] = this.color;
                }
            }
            // Satır silme
            for(let r=0; r<ROW; r++){
                let isRowFull = true;
                for(let c=0; c<COL; c++) if(board[r][c] == "black") isRowFull = false;
                if(isRowFull){
                    for(let y=r; y>1; y--) for(let c=0; c<COL; c++) board[y][c] = board[y-1][c];
                    for(let c=0; c<COL; c++) board[0][c] = "black";
                    score += 10;
                    updateHUD();
                }
            }
            drawBoard();
        }
        Piece.prototype.collision = function(x,y,piece){
            for(let r=0; r<piece.length; r++){
                for(let c=0; c<piece.length; c++){
                    if(!piece[r][c]) continue;
                    let newX = this.x + c + x;
                    let newY = this.y + r + y;
                    if(newX < 0 || newX >= COL || newY >= ROW) return true;
                    if(newY < 0) continue;
                    if(board[newY][newX] != "black") return true;
                }
            }
            return false;
        }

        function drawSquare(x,y,color){
            ctx.fillStyle = color; ctx.fillRect(x*SQ,y*SQ,SQ,SQ);
            ctx.strokeStyle="white"; ctx.strokeRect(x*SQ,y*SQ,SQ,SQ);
        }
        function drawBoard(){ for(let r=0; r<ROW; r++) for(let c=0; c<COL; c++) drawSquare(c,r,board[r][c]); }
        function drop(){ p.moveDown(); }


        // ==========================================
        // 3. OYUN: PAC-MAN (Arcade Haritalı ve 3 Canlı)
        // ==========================================
        // 1=Duvar, 0=Yem, 2=Boş, 3=Pacman, 4=Hayalet
        const map = [
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1],
            [1,0,1,1,0,1,1,1,0,1,1,0,1,1,1,0,1,1,0,1],
            [1,0,1,1,0,1,1,1,0,1,1,0,1,1,1,0,1,1,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,1,1,0,1,0,1,1,1,1,1,1,0,1,0,1,1,0,1],
            [1,0,0,0,0,1,0,0,0,1,1,0,0,0,1,0,0,0,0,1],
            [1,1,1,1,0,1,1,1,2,1,1,2,1,1,1,0,1,1,1,1],
            [1,2,2,1,0,1,2,2,2,4,4,2,2,2,1,0,1,2,2,1], // Hayalet Evi (Ortada)
            [1,1,1,1,0,1,2,1,1,2,2,1,1,2,1,0,1,1,1,1],
            [1,0,0,0,0,0,0,1,2,2,2,2,1,0,0,0,0,0,0,1],
            [1,0,1,1,0,1,1,1,0,1,1,0,1,1,1,0,1,1,0,1],
            [1,0,0,1,0,0,0,0,0,0,3,0,0,0,0,0,1,0,0,1], // Pacman (3) burada
            [1,1,0,1,0,1,0,1,1,1,1,1,1,0,1,0,1,0,1,1],
            [1,0,0,0,0,1,0,0,0,1,1,0,0,0,1,0,0,0,0,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
        ];
        
        // Harita Kopyası (Yemler yendikçe ana harita bozulmasın diye sıfırlamada bunu kullanacağız aslında ama basitlik için direkt map kullanıyoruz)
        let pacInfo = {x:10, y:12, dir:4}; // x,y tile cinsi. dir: 0:sol, 1:yukarı, 2:sağ, 3:aşağı
        let ghost = {x:9, y:8};
        
        function initPacman() {
            // Haritadaki yemleri sıfırlayabilirdik ama bu versiyonda devam ediyoruz.
            gameInterval = setInterval(pacLoop, 200);
            
            document.onkeydown = function(e){
                if(activeGame !== 'pacman') return;
                if(e.keyCode==37) pacInfo.reqDir=0;
                if(e.keyCode==38) pacInfo.reqDir=1;
                if(e.keyCode==39) pacInfo.reqDir=2;
                if(e.keyCode==40) pacInfo.reqDir=3;
            }
        }

        function pacLoop() {
            // Yön Değiştirme Kontrolü (Duvar Yoksa Dön)
            let nextX = pacInfo.x; let nextY = pacInfo.y;
            if(pacInfo.reqDir===0) nextX--; 
            if(pacInfo.reqDir===1) nextY--;
            if(pacInfo.reqDir===2) nextX++;
            if(pacInfo.reqDir===3) nextY++;
            
            if(map[nextY][nextX] !== 1) {
                pacInfo.dir = pacInfo.reqDir;
            }

            // Hareket Ettir
            if(pacInfo.dir===0) pacInfo.x--; 
            if(pacInfo.dir===1) pacInfo.y--;
            if(pacInfo.dir===2) pacInfo.x++;
            if(pacInfo.dir===3) pacInfo.y++;

            // Duvara Çarpma (Geri Al)
            if(map[pacInfo.y][pacInfo.x] === 1) {
                 if(pacInfo.dir===0) pacInfo.x++; 
                 if(pacInfo.dir===1) pacInfo.y++;
                 if(pacInfo.dir===2) pacInfo.x--;
                 if(pacInfo.dir===3) pacInfo.y--;
            }

            // Yem Yeme
            if(map[pacInfo.y][pacInfo.x] === 0) {
                map[pacInfo.y][pacInfo.x] = 2; // Boş yap
                score += 10;
                updateHUD();
            }

            // Hayalet Hareketi (Basit Takip)
            let gX = ghost.x; let gY = ghost.y;
            if(pacInfo.x > gX && map[gY][gX+1]!==1) ghost.x++;
            else if(pacInfo.x < gX && map[gY][gX-1]!==1) ghost.x--;
            else if(pacInfo.y > gY && map[gY+1][gX]!==1) ghost.y++;
            else if(pacInfo.y < gY && map[gY-1][gX]!==1) ghost.y--;

            // Çarpışma (Can Kaybı)
            if(pacInfo.x === ghost.x && pacInfo.y === ghost.y) {
                lives--;
                updateHUD();
                pacInfo.x = 10; pacInfo.y = 12; // Başlangıca dön
                ghost.x = 9; ghost.y = 8;
                if(lives <= 0) {
                    alert("Oyun Bitti! Skorun: " + score);
                    resetGame();
                    return;
                }
            }

            drawPacman();
        }

        function drawPacman() {
            ctx.fillStyle = "black";
            ctx.fillRect(0,0,400,400);

            // Çizim Döngüsü
            const T = 25; // Tile Size (400/16 = 25px)
            
            for(let y=0; y<16; y++) {
                for(let x=0; x<20; x++) {
                    if(!map[y]) continue;
                    let val = map[y][x];
                    
                    if(val === 1) { // Duvar (Mavi Çizgili)
                        ctx.strokeStyle = "blue";
                        ctx.lineWidth = 2;
                        ctx.strokeRect(x*T + 5, y*T + 5, T-10, T-10);
                    } else if(val === 0) { // Yem
                        ctx.fillStyle = "#ffb8ae"; // Soluk pembe/beyazımsı
                        ctx.fillRect(x*T + 10, y*T + 10, 5, 5);
                    }
                }
            }

            // Pacman Çiz
            ctx.beginPath();
            ctx.arc(pacInfo.x*T + 12.5, pacInfo.y*T + 12.5, 10, 0.2 * Math.PI, 1.8 * Math.PI);
            ctx.fillStyle = "yellow";
            ctx.fill();

            // Hayalet Çiz
            ctx.fillStyle = "red";
            ctx.beginPath();
            ctx.arc(ghost.x*T + 12.5, ghost.y*T + 10, 10, Math.PI, 0);
            ctx.lineTo(ghost.x*T + 22.5, ghost.y*T + 22);
            ctx.lineTo(ghost.x*T + 2.5, ghost.y*T + 22);
            ctx.fill();
        }

    </script>
</body>
</html>
