<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Oyun Portalı v1.9.1</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap');

        :root {
            --primary-yellow: #ffcc00;
            --bg-dark: #121212;
            --card-bg: #1e1e1e;
            --accent-blue: #2196F3;
        }

        body {
            margin: 0;
            background-color: var(--bg-dark);
            color: #fff;
            font-family: 'Poppins', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* HEADER */
        header {
            width: 100%;
            padding: 20px 50px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-sizing: border-box;
            background: #1a1a1a;
            border-bottom: 2px solid #333;
            position: relative;
            z-index: 10;
        }

        .logo {
            font-size: 24px;
            font-weight: 800;
            color: var(--primary-yellow);
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .nav-links {
            display: flex;
            gap: 20px;
            font-size: 14px;
            color: #aaa;
        }

        .nav-links span {
            cursor: pointer;
            transition: color 0.3s;
        }

        .nav-links span:hover { color: #fff; }

        .nav-links span.active {
            color: var(--primary-yellow);
            font-weight: 600;
            border-bottom: 2px solid var(--primary-yellow);
        }

        /* SÜRÜM ROZETİ */
        .version-wrapper {
            position: relative;
            padding: 2px;
            border-radius: 20px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .version-wrapper:hover { transform: scale(1.05); }

        .version-wrapper::before {
            content: '';
            position: absolute;
            top: -50%; left: -50%;
            width: 200%; height: 200%;
            background: conic-gradient(#ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #8f00ff, #ff0000);
            animation: rotateBorder 2s linear infinite;
            z-index: 0;
        }

        @keyframes rotateBorder { 100% { transform: rotate(360deg); } }

        .version-badge {
            position: relative;
            background: #000;
            padding: 5px 15px;
            border-radius: 18px;
            font-size: 12px;
            font-weight: bold;
            color: #fff;
            z-index: 1;
        }

        /* ANA SAYFA (HOME SCREEN) */
        #home-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            flex-grow: 1;
            padding: 40px;
            animation: fadeIn 0.8s ease-out;
        }

        .hero-title {
            font-size: 48px;
            font-weight: 800;
            margin-bottom: 10px;
            background: linear-gradient(to right, #ffcc00, #ff8800);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero-desc {
            font-size: 18px;
            color: #bbb;
            max-width: 600px;
            margin-bottom: 30px;
        }

        .hero-btn {
            background: var(--primary-yellow);
            color: #000;
            padding: 15px 40px;
            border-radius: 30px;
            font-weight: bold;
            font-size: 18px;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(255, 204, 0, 0.3);
        }

        .hero-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 204, 0, 0.5);
        }

        /* OYUN MENÜSÜ */
        #menu-screen {
            display: none;
            text-align: center;
            padding-top: 50px;
            animation: fadeIn 0.5s;
        }

        .games-grid {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            padding: 20px;
        }

        .game-card {
            background: var(--card-bg);
            border: 1px solid #333;
            border-radius: 15px;
            width: 280px;
            padding: 40px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .game-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-yellow);
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.2);
        }

        .game-icon svg { width: 60px; height: 60px; fill: none; stroke: var(--primary-yellow); stroke-width: 2.5; }
        .game-icon.fill svg { fill: var(--primary-yellow); stroke: none; }

        /* OYUN ALANI */
        #game-container {
            display: none;
            flex-direction: column;
            align-items: center;
            padding-top: 20px;
            width: 100%;
        }

        canvas { background: #000; border: 3px solid #333; box-shadow: 0 0 30px rgba(0,0,0,0.5); }

        /* MODAL */
        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0;
            width: 100%; height: 100%; background: rgba(0,0,0,0.85);
            z-index: 100; justify-content: center; align-items: center;
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background: #1a1a1a; width: 500px; border-radius: 15px; padding: 30px; border: 1px solid #444;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* OYUN SONU */
        #game-over-screen {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9); padding: 40px; border-radius: 15px;
            text-align: center; display: none; border: 2px solid var(--primary-yellow);
        }
    </style>
</head>
<body>

    <header>
        <div class="logo" onclick="showSection('home')">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#ffcc00" stroke-width="2"><rect x="2" y="6" width="20" height="12" rx="2"></rect><path d="M6 12h4m-2-2v4"></path><line x1="15" y1="11" x2="15" y2="11"></line><line x1="18" y1="13" x2="18" y2="13"></line></svg>
            OYUN PORTALI
        </div>
        <div class="nav-links">
            <span id="nav-home" class="active" onclick="showSection('home')">Anasayfa</span>
            <span id="nav-games" onclick="showSection('games')">Oyunlar</span>
            <span>Ders Notları</span>
            <span>Filmler</span>
        </div>
        <div class="version-wrapper" onclick="openChangelog()">
            <div class="version-badge">v1.9.1 ℹ</div>
        </div>
    </header>

    <div id="home-screen">
        <h1 class="hero-title">Eğlenceye Hoş Geldin!</h1>
        <p class="hero-desc">En popüler arcade oyunlarını oynamak, ders notlarına göz atmak ve portalı keşfetmek için yukarıdaki menüyü kullanabilirsin.</p>
        <button class="hero-btn" onclick="showSection('games')">Hemen Oyunlara Git</button>
    </div>

    <div id="menu-screen">
        <h2 style="font-size: 32px; margin-bottom: 30px;">Oyun Kütüphanesi</h2>
        <div class="games-grid">
            <div class="game-card" onclick="startGame('snake')">
                <div class="game-icon"><svg viewBox="0 0 24 24"><path d="M7 4v2a2 2 0 0 1-2 2H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2a2 2 0 0 1 2 2v2"></path><circle cx="8" cy="4" r="2" fill="#ffcc00" stroke="none"></circle></svg></div>
                <div style="font-weight:800; font-size:20px;">Yılan Oyunu</div>
                <div style="font-size:13px; color:#888;">Gözlü yılan ile elma topla!</div>
            </div>
            <div class="game-card" onclick="startGame('tetris')">
                <div class="game-icon fill"><svg viewBox="0 0 24 24"><rect x="2" y="2" width="9" height="9" rx="1"></rect><rect x="13" y="2" width="9" height="9" rx="1"></rect><rect x="2" y="13" width="9" height="9" rx="1"></rect><rect x="13" y="13" width="9" height="9" rx="1"></rect></svg></div>
                <div style="font-weight:800; font-size:20px;">Tetris</div>
                <div style="font-size:13px; color:#888;">Blokları diz ve puanları topla.</div>
            </div>
            <div class="game-card" onclick="startGame('pacman')">
                <div class="game-icon fill"><svg viewBox="0 0 24 24"><path d="M12 2a8 8 0 0 0-8 8v10a2 2 0 0 0 2 2c.5 0 1-.5 1.5-1s1 1 1.5 1 1.5-1 1.5-1 1.5 1 1.5-1 1.5-1 2-2V10a8 8 0 0 0-8-8z"></path><circle cx="9" cy="9" r="1.5" fill="#000"></circle><circle cx="15" cy="9" r="1.5" fill="#000"></circle></svg></div>
                <div style="font-weight:800; font-size:20px;">Pac-Man</div>
                <div style="font-size:13px; color:#888;">Hayaletten kaç, puanları ye!</div>
            </div>
        </div>
    </div>

    <div id="game-container">
        <div style="display:flex; justify-content:space-between; width:600px; margin-bottom:15px;">
            <button onclick="showSection('games')" style="background:#333; color:#fff; border:none; padding:8px 15px; cursor:pointer; border-radius:5px;">← Vazgeç</button>
            <div id="score-display" style="font-weight:bold; color:var(--primary-yellow); font-size:20px;">SKOR: 0</div>
        </div>
        <div style="position: relative;">
            <canvas id="gameCanvas"></canvas>
            <div id="game-over-screen">
                <h2 style="color:#ff4444; margin:0">OYUN BİTTİ</h2>
                <p id="final-score" style="font-size:20px">Skor: 0</p>
                <button onclick="restartGame()" style="background:var(--accent-blue); color:#fff; border:none; padding:10px 20px; border-radius:5px; cursor:pointer;">Tekrar Dene</button>
            </div>
        </div>
    </div>

    <div id="changelog-modal" class="modal-overlay">
        <div class="modal-content">
            <button onclick="closeChangelog()" style="float:right; background:none; border:none; color:#888; font-size:24px; cursor:pointer;">×</button>
            <h3 style="margin-top:0">Sürüm Geçmişi</h3>
            <div style="margin-bottom:15px">
                <strong style="color:var(--primary-yellow)">v1.9.1 (Yeni)</strong>
                <ul style="font-size:13px; color:#ccc; padding-left:15px">
                    <li>Ana Menü Sistemi: Uygulama artık "Anasayfa" ile açılıyor.</li>
                    <li>Gezinti: Oyunlara gitmek için "Oyunlar" sekmesi eklendi.</li>
                    <li>UI Geliştirmeleri: Daha modern butonlar ve geçişler.</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // NAVIGASYON MANTIĞI
        function showSection(section) {
            // Tüm ekranları gizle
            document.getElementById('home-screen').style.display = 'none';
            document.getElementById('menu-screen').style.display = 'none';
            document.getElementById('game-container').style.display = 'none';
            if(gameInterval) clearInterval(gameInterval);

            // Aktif link stilini güncelle
            document.getElementById('nav-home').classList.remove('active');
            document.getElementById('nav-games').classList.remove('active');

            if(section === 'home') {
                document.getElementById('home-screen').style.display = 'flex';
                document.getElementById('nav-home').classList.add('active');
            } else if(section === 'games') {
                document.getElementById('menu-screen').style.display = 'block';
                document.getElementById('nav-games').classList.add('active');
            }
        }

        // CHANGELOG
        function openChangelog() { document.getElementById('changelog-modal').style.display = 'flex'; }
        function closeChangelog() { document.getElementById('changelog-modal').style.display = 'none'; }

        // OYUN MOTORU AYARLARI
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let activeGame = null, gameInterval = null, score = 0, isGameOver = false;

        function startGame(type) {
            document.getElementById('menu-screen').style.display = 'none';
            document.getElementById('game-container').style.display = 'flex';
            document.getElementById('game-over-screen').style.display = 'none';
            activeGame = type; isGameOver = false; score = 0; updateScore(0);
            
            document.onkeydown = handleInput;
            if(type === 'snake') initSnake();
            if(type === 'tetris') initTetris();
            if(type === 'pacman') initPacman();
        }

        function restartGame() { startGame(activeGame); }
        function updateScore(val) { 
            score = val; 
            document.getElementById('score-display').innerText = activeGame === 'pacman' ? `SKOR: ${score} | CAN: ${pacmanLives}` : `SKOR: ${score}`;
        }

        function showGameOver(text) {
            clearInterval(gameInterval);
            isGameOver = true;
            document.getElementById('final-score').innerText = text || `Skor: ${score}`;
            document.getElementById('game-over-screen').style.display = 'block';
        }

        function handleInput(e) {
            if(isGameOver) return;
            if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.code)) e.preventDefault();
            if(activeGame === 'snake') handleSnakeInput(e);
            if(activeGame === 'tetris') handleTetrisInput(e);
            if(activeGame === 'pacman') handlePacmanInput(e);
        }

        // --- YILAN OYUNU (v1.8.3'teki Gözlü Versiyon) ---
        let snake=[], apple={}, snakeDir={}, nextSnakeDir={};
        const sGrid=25, sCols=24, sRows=24;
        function initSnake() {
            canvas.width = 600; canvas.height = 600;
            snake = [{x:10,y:10}, {x:9,y:10}, {x:8,y:10}];
            snakeDir = {x:1, y:0}; nextSnakeDir = {x:1, y:0};
            apple = {x:5, y:5};
            gameInterval = setInterval(updateSnake, 100);
        }
        function handleSnakeInput(e) {
            if(e.key==='ArrowUp' && snakeDir.y===0) nextSnakeDir={x:0, y:-1};
            if(e.key==='ArrowDown' && snakeDir.y===0) nextSnakeDir={x:0, y:1};
            if(e.key==='ArrowLeft' && snakeDir.x===0) nextSnakeDir={x:-1, y:0};
            if(e.key==='ArrowRight' && snakeDir.x===0) nextSnakeDir={x:1, y:0};
        }
        function updateSnake() {
            snakeDir = nextSnakeDir;
            let head = {x: snake[0].x + snakeDir.x, y: snake[0].y + snakeDir.y};
            if(head.x<0 || head.x>=sCols || head.y<0 || head.y>=sRows || snake.some(p=>p.x===head.x && p.y===head.y)) return showGameOver();
            snake.unshift(head);
            if(head.x===apple.x && head.y===apple.y) { score++; updateScore(score); apple={x:Math.floor(Math.random()*sCols), y:Math.floor(Math.random()*sRows)}; } else snake.pop();
            
            ctx.fillStyle="#1a1a1a"; ctx.fillRect(0,0,600,600);
            ctx.fillStyle="#ff4444"; ctx.beginPath(); ctx.arc(apple.x*sGrid+sGrid/2, apple.y*sGrid+sGrid/2, 10, 0, Math.PI*2); ctx.fill();
            snake.forEach((p, i) => {
                ctx.fillStyle = i===0 ? "#ffcc00" : "#aa8800";
                ctx.fillRect(p.x*sGrid+1, p.y*sGrid+1, sGrid-2, sGrid-2);
                if(i===0) { // Gözler
                    ctx.fillStyle="black";
                    ctx.fillRect(p.x*sGrid+5, p.y*sGrid+5, 4, 4);
                    ctx.fillRect(p.x*sGrid+16, p.y*sGrid+5, 4, 4);
                }
            });
        }

        // --- TETRIS ---
        const tRows=20, tCols=10, tSize=30;
        let tBoard=[], tPiece=null;
        function initTetris() {
            canvas.width = 300; canvas.height = 600;
            tBoard = Array.from({length: tRows}, () => Array(tCols).fill(null));
            spawnPiece();
            gameInterval = setInterval(() => { moveDown(); drawTetris(); }, 800);
        }
        function spawnPiece() {
            tPiece = { x:3, y:0, matrix: [[1,1,1,1]], color: 'cyan' };
            if(checkCol(0,0)) showGameOver("Tetris Bitti!");
        }
        function checkCol(ox, oy, m) {
            let mat = m || tPiece.matrix;
            for(let r=0; r<mat.length; r++) for(let c=0; c<mat[r].length; c++) {
                if(mat[r][c]) {
                    let nx = tPiece.x + c + ox, ny = tPiece.y + r + oy;
                    if(nx<0 || nx>=tCols || ny>=tRows || (ny>=0 && tBoard[ny][nx])) return true;
                }
            } return false;
        }
        function moveDown() {
            if(!checkCol(0,1)) tPiece.y++;
            else { 
                tPiece.matrix.forEach((row, r) => row.forEach((v, c) => { if(v) tBoard[tPiece.y+r][tPiece.x+c] = tPiece.color; }));
                spawnPiece();
            }
        }
        function handleTetrisInput(e) {
            if(e.key==='ArrowLeft' && !checkCol(-1,0)) tPiece.x--;
            if(e.key==='ArrowRight' && !checkCol(1,0)) tPiece.x++;
            if(e.key==='ArrowDown') moveDown();
            drawTetris();
        }
        function drawTetris() {
            ctx.fillStyle="#000"; ctx.fillRect(0,0,300,600);
            tBoard.forEach((row, r) => row.forEach((v, c) => { if(v) { ctx.fillStyle=v; ctx.fillRect(c*30, r*30, 29, 29); } }));
            ctx.fillStyle=tPiece.color; tPiece.matrix.forEach((row, r) => row.forEach((v, c) => { if(v) ctx.fillRect((tPiece.x+c)*30, (tPiece.y+r)*30, 29, 29); }));
        }

        // --- PACMAN (Basit Versiyon) ---
        let pacmanLives=3, pacX=1, pacY=1;
        function initPacman() {
            canvas.width = 400; canvas.height = 400;
            pacX=1; pacY=1;
            gameInterval = setInterval(drawPac, 150);
        }
        function handlePacmanInput(e) {
            if(e.key==='ArrowRight') pacX++; if(e.key==='ArrowLeft') pacX--;
            if(e.key==='ArrowDown') pacY++; if(e.key==='ArrowUp') pacY--;
        }
        function drawPac() {
            ctx.fillStyle="#000"; ctx.fillRect(0,0,400,400);
            ctx.fillStyle="yellow"; ctx.beginPath();
            ctx.arc(pacX*20, pacY*20, 15, 0.2*Math.PI, 1.8*Math.PI);
            ctx.lineTo(pacX*20, pacY*20); ctx.fill();
        }

    </script>
</body>
</html>
